(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25e8bb6a"],{"117c":function(t,e,s){},3191:function(t,e,s){"use strict";s.d(e,"e",(function(){return n})),s.d(e,"c",(function(){return i})),s.d(e,"d",(function(){return r})),s.d(e,"b",(function(){return c})),s.d(e,"a",(function(){return l}));var a=s("176e");function n(t){return Object(a["a"])({url:"/v1/square/list",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/v1/carousel/list",method:"get",params:t})}function r(){return Object(a["a"])({url:"/v1/notice/list",method:"get"})}function c(t){return Object(a["a"])({url:"/v1/article/list",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/Article/getRow/".concat(t),method:"get"})}},"439f":function(t,e,s){"use strict";var a=s("c2f4"),n=s.n(a);n.a},"4cd6":function(t,e,s){},"83f3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container"},[s("div",{staticClass:"main"},[s("div",{},[t._v("专栏 / 文章详情")]),t._v(" "),s("div",{staticClass:"author-info"},[s("router-link",{staticClass:"author",attrs:{to:""}},[s("i",{staticClass:"avatar",style:"background-image: url("+t.articleInfo.avatar+")"})]),t._v(" "),s("div",{staticClass:"release-info"},[s("div",{},[s("router-link",{staticClass:"author",attrs:{to:""}},[t._v(t._s(t.articleInfo.create_user_name))]),t._v(" "),s("a",{staticClass:"focus"},[t._v(t._s("关注作者"))])],1),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.$fn.timeView(t.articleInfo.create_time))+"发布")])])],1),t._v(" "),s("side-widget"),t._v(" "),s("p",{staticClass:"title"},[t._v(t._s(t.articleInfo.title))]),t._v(" "),s("div",{staticClass:"article-info"},[s("span",{class:"tag "+t.getClass(t.articleInfo.type)},[t._v(t._s(t.$fn.getDataName({dataList:t.listTypeInfo.articleTypeList,value:"value",label:"key",data:t.articleInfo.type})))]),t._v(" "),t._l(t.articleInfo.tagList,(function(e,a){return s("span",{key:a,class:"tag "+t.getClass("article-tag")},[t._v("\n        "+t._s(e.name)+"\n      ")])})),t._v(" "),s("span",{staticClass:"more"},[s("span",{staticClass:"read-times"},[t._v("0次阅读")]),t._v("\n        ·\n        "),s("span",{staticClass:"read-time"},[t._v("读完需要 "+t._s(t.articleInfo.readTime)+" 分钟")]),t._v("\n        ·\n        "),t.userInfo&&t.articleInfo.create_user===t.userInfo.id?s("router-link",{staticClass:"update",attrs:{to:"/write?type=write&id="+t.articleInfo.id}},[t._v("编辑")]):t._e()],1)],2),t._v(" "),s("div",{staticClass:"markdown",domProps:{innerHTML:t._s(t.marked(t.articleInfo.content))}}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"recommended"},[s("p",{staticClass:"title"},[t._v("你可能感兴趣的")]),t._v(" "),s("ul",{staticClass:"recommended-list"},t._l(t.listInfo.data,(function(e,a){return s("li",{key:a,staticClass:"item"},[s("router-link",{staticClass:"recommended-article",attrs:{to:"/columns/article/"+e.id}},[t._v(t._s(e.title))]),t._v(" "),s("span",{staticClass:"author"},[t._v(t._s(e.create_user_name))])],1)})),0)]),t._v(" "),s("comments-list",{attrs:{"article-id":t.$route.params.id,"article-auth":t.articleInfo.create_user}})],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"handle"},[s("div",{},[s("span",{staticClass:"goods"},[t._v("赞  0")]),t._v(" "),s("span",{staticClass:"collection"},[t._v("收藏  1")])]),t._v(" "),s("span",{staticClass:"appreciates"},[t._v("赞赏支持")]),t._v(" "),s("span",{staticClass:"desc"},[t._v("如果觉得我的文章对你有用，请随意赞赏")])])}],i=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),r=s("3191"),c=s("5880"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"side-widget "+(t.active?"active":"")},[s("i",{staticClass:"el-icon-caret-top"}),t._v(" "),s("p",{staticClass:"nums"},[t._v("0")])])},o=[],u={props:{active:{type:Boolean,default:!1}}},d=u,f=(s("439f"),s("2877")),p=Object(f["a"])(d,l,o,!1,null,"d8407058",null),m=p.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comments"},[s("p",{staticClass:"title"},[t._v(t._s(t.commentsInfo.totals?t.commentsInfo.totals+"条评论":"评论"))]),t._v(" "),s("ul",{staticClass:"comments-list"},t._l(t.commentsInfo.list,(function(e,a){return s("li",{key:a,staticClass:"items"},[s("i",{staticClass:"avatar",style:"background-image: url("+e.avatar+")"}),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"replier-head"},[s("div",{staticClass:"replier-info"},[s("span",{staticClass:"replier-user"},[t._v(t._s(e.replier_name))]),t._v(" "),e.create_user===t.articleAuth?s("span",{staticClass:"tag original"},[t._v("作者")]):t._e(),t._v("\n            ·\n            "),s("span",{staticClass:"replier-time"},[t._v(t._s(t.$fn.timeView(e.create_time)))])]),t._v(" "),t.userInfo?s("div",{staticClass:"more"},[s("i",{staticClass:"el-icon-albb-flag",on:{click:function(s){return t.handleClick("report",e)}}}),t._v(" "),e.create_user===t.userInfo.id?s("i",{staticClass:"el-icon-albb-delete1",on:{click:function(s){return t.handleClick("delete",e)}}}):t._e()]):t._e()]),t._v(" "),s("div",{staticClass:"replier-content"},[t._v("\n          "+t._s(e.content)+"\n        ")]),t._v(" "),t.userInfo?s("div",{staticClass:"replier-more"},[t._m(0,!0),t._v(" "),s("span",{staticClass:"reply",on:{click:function(s){return t.handleClick("reply",e)}}},[t._v("回复")])]):t._e(),t._v(" "),s("ul",{staticClass:"reply-list"},[t._l(e.children,(function(a,n){return s("li",{key:n,staticClass:"reply-item"},[s("span",{staticClass:"reply-user"},[t._v(t._s(a.replier_name))]),t._v(" "),a.create_user===t.articleAuth?s("span",{staticClass:"tag original"},[t._v("作者")]):t._e(),t._v(" "),s("br"),t._v(" "),s("span",[t._v("回复")]),t._v(" "),s("span",{staticClass:"by-reply-user"},[t._v(t._s(a.by_replier_name))]),t._v(" "),a.p_user_id===t.articleAuth?s("span",{staticClass:"tag original"},[t._v("作者")]):t._e(),t._v(":\n            "+t._s(a.content)+"\n            "),s("br"),t._v(" "),s("span",{staticClass:"reply-time"},[t._v(t._s(t.$fn.timeView(a.create_time)))]),t._v(" "),t.userInfo?s("div",{staticClass:"reply-more"},[t._m(1,!0),t._v(" "),s("span",{staticClass:"reply",on:{click:function(s){return t.handleClick("reply",e)}}},[t._v("回复")])]):t._e()])})),t._v(" "),t.replyInfo.pid===e.id?s("div",{staticClass:"reply-handle"},[s("el-input",{attrs:{type:"textarea",rows:1,placeholder:"文明社会，理性评论"},model:{value:t.replyInfo.content,callback:function(e){t.$set(t.replyInfo,"content",e)},expression:"replyInfo.content"}}),t._v(" "),s("el-button",{staticClass:"reply-bt",attrs:{size:"mini"},on:{click:function(s){return t.handleClick("addReply",e)}}},[t._v("添加回复")])],1):t._e()],2)])])})),0),t._v(" "),s("div",{staticClass:"release"},[t.userInfo?s("i",{staticClass:"avatar",style:"background-image: url("+t.userInfo.avatar+")"}):t._e(),t._v(" "),s("div",{staticClass:"handle"},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"文明社会，理性评论"},model:{value:t.commentsInfo.data.content,callback:function(e){t.$set(t.commentsInfo.data,"content",e)},expression:"commentsInfo.data.content"}}),t._v(" "),s("p",{staticStyle:{width:"100%","text-align":"right"}},[s("el-button",{staticClass:"release-bt",attrs:{type:"primary",disabled:!t.userInfo},on:{click:function(e){t.userInfo&&t.handleClick("release")}}},[t._v("\n          "+t._s(t.userInfo?"发布评论":"登录后可发布评论")+"\n        ")])],1)],1)])])},v=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"praise"},[s("i",{staticClass:"el-icon-albb-good"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"praise"},[s("i",{staticClass:"el-icon-albb-good"})])}],h=(s("c5f6"),s("176e"));function C(t){return Object(h["a"])({url:"/apis/bbs/v1/articleComments/create",method:"post",data:t})}function b(t){return Object(h["a"])({url:"/apis/bbs/v1/articleComments/delete/".concat(t),method:"delete"})}function g(t){return Object(h["a"])({url:"/apis/bbs/v1/articleComments/getAll",method:"get",params:t})}function y(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function I(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?y(s,!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):y(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var O={name:"CommentsList",props:{articleId:{type:Number},articleAuth:{type:Number}},data:function(){return{commentsList:[],commentsInfo:{listSuccess:!0,list:[],totals:0,data:{article_id:"",pid:"",p_user_id:"",content:""}},replyInfo:{article_id:"",pid:"",p_user_id:"",content:""}}},computed:I({},Object(c["mapGetters"])(["userInfo"])),mounted:function(){this.init(),this.getComments()},methods:{init:function(){var t=this.commentsInfo.data;t.article_id=this.articleId},handleClick:function(t,e){var s=this.commentsInfo.data,a=this.replyInfo;switch(t){case"release":s.pid=0,s.p_user_id=this.articleAuth,this.releaseComments(s);break;case"reply":a.article_id=this.articleId,a.pid=e.id,a.p_user_id=e.create_user;break;case"addReply":this.releaseComments(this.replyInfo),this.replyInfo={article_id:"",pid:"",p_user_id:"",content:""};break;case"delete":this.deleteComments(e.id);break}},getComments:function(t){var e=this.commentsInfo;g({article_id:this.articleId}).then((function(t){t.success?(t.content.forEach((function(e){0===e.pid&&(e.children=[]),t.content.forEach((function(t){e.id===t.pid&&(e.children=e.children||[],e.children.push(t))}))})),e.list=t.content.filter((function(t){return 0===t.pid})),e.totals=t.totals):e.listSuccess=!1})).catch((function(){e.listSuccess=!1}))},releaseComments:function(t){var e=this,s=this.commentsInfo.data;C(t).then((function(t){t.success?(s.content="",e.getComments()):e.$message({showClose:!0,message:t.message,type:t.success?"success":"error",duration:2e3})}))},deleteComments:function(t){var e=this;this.$confirm("此操作将永久删除该评论以及评论下的回复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){b(t).then((function(t){t.success&&e.getComments(),e.$message({showClose:!0,message:t.message,type:t.success?"success":"error",duration:2e3})}))}))}}},k=O,w=(s("bdd2"),Object(f["a"])(k,_,v,!1,null,"0cdad4dd",null)),j=w.exports,$=s("0e54"),P=s.n($),E=function(t){if(t){var e=new P.a.Renderer;return P.a.setOptions({renderer:e,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1}),P()(t)}};function L(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function S(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?L(s,!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):L(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var x={components:{SideWidget:m,CommentsList:j},data:function(){return{marked:E,listTypeInfo:{articleTypeList:[{value:1,key:"原创"}],titleList:[]},listInfo:{data:[],query:{curPage:1,pageSize:8,flag:3}},articleInfo:{}}},computed:S({},Object(c["mapGetters"])(["userInfo"])),mounted:function(){var t=this;this.getArticleInfo(),this.getList(),setTimeout((function(){document.querySelector(".markdown").addEventListener("click",(function(e){e.preventDefault(),"A"===e.target.nodeName&&t.$fn.openWindow(e.target.href)}))}),1e3)},methods:{getArticleInfo:function(){var t=this;Object(r["a"])(this.$route.params.id).then((function(e){e.success?(t.articleInfo=e.content[0],t.articleInfo.readTime=Math.floor(t.articleInfo.content.length/300)):t.$router.push("/404")}))},getList:function(){var t=this,e=this.listInfo;Object(r["b"])(e.query).then((function(s){s.success?e.data=s.content.result:t.$message({showClose:!0,message:s.message,type:s.success?"success":"error",duration:3500})}))},getClass:function(t){switch(t){case 1:return"original";case"article-tag":return"article-tag"}}}},A=x,D=(s("c8c8"),Object(f["a"])(A,a,n,!1,null,"3714a02d",null));e["default"]=D.exports},bdd2:function(t,e,s){"use strict";var a=s("4cd6"),n=s.n(a);n.a},c2f4:function(t,e,s){},c8c8:function(t,e,s){"use strict";var a=s("117c"),n=s.n(a);n.a}}]);